<?php
/**
* Database class
*
* @author Brandon Vanhook
*/

class TextDatabase {

//Write data in the format $data = array("username: buddy , password: lov123");
public static function createRecord($data) {

    $my_file = 'data.txt';
    $handle = fopen($my_file, 'w') or die('Cannot open file: '.$my_file);

//Writes each array contents
    foreach($data as $d){
        fwrite($handle, $d);
    }

    fclose($handle);
}
//For instance, 'username:Roscoe , password: Worldpeace123'
public static function updateNewRecord($data){
    $my_file = 'data.txt';
    $handle = fopen($my_file, 'a') or die('Cannot open file: '.$my_file);

    $new_data = "\n".$data;
    fwrite($handle, $new_data);
    fclose($handle);
}


public static function deleteNewRecord(){

    //Load all data to array
    $contents=TextDatabase::loadNewRecord();
    //Remove 1 record
    array_pop($contents);

   //Put data back to the file
    $my_file = 'data.txt';

    //Clear record
    $handle = fopen($my_file, 'w') or die('Cannot open file: '.$my_file);
    fclose($handle);

    //Put new data back to it
    TextDatabase::createRecord($contents);

    echo ("user was successfully deleted");
}


public static function loadNewRecord(){
    //Load content
    $my_file = 'data.txt';
    $handle = fopen($my_file, 'r') or die('Cannot open file: '.$my_file);
    $r=array();
    while(!feof($handle)){

   //Read string of this handle (file)
       $content=fgets($handle);
      array_push ($r, $content);
    }
    fclose($handle);
    return $r;
}
}
?>
